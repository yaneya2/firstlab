# Первая лабораторная работа по ПАТД

## Общее описание

Эта программа представляет собой реализацию универсального динамического массива (DynamicArray) на языке C, который может работать с разными типами данных, включая числа с плавающей запятой (double), строки (string) и трехмерные точки (Point). Программа предоставляет интерфейс командной строки для управления динамическими массивами и выполнения различных операций над ними.

## Архитектура проекта

Проект состоит из следующих основных компонентов:

### Заголовочные файлы (headers/)
- `DynamicArray.h` - объявление структуры DynamicArray и интерфейсов операций с динамическим массивом
- `FieldInfo.h` - объявление структуры FieldInfo, которая описывает тип данных
- `Allocator.h` - объявление типов для аллокаторов памяти
- `UsersStruct.h` - объявление пользовательских структур, включая Point

### Исходные файлы (c/)
- `DynamicArray.c` - реализация всех операций с динамическим массивом
- `FieldInfo.c` - реализация функций для работы с различными типами данных
- `UI.c` - реализация пользовательского интерфейса
- `main.c` - точка входа в программу

### Другие файлы
- `tests.c` - модульные тесты для проверки корректности реализации
- `CMakeLists.txt` - файл сборки проекта с использованием CMake

## Функциональность

Программа поддерживает следующие операции с динамическими массивами:

1. **Создание динамического массива** - создание нового пустого динамического массива для конкретного типа данных
2. **Добавление элементов** - добавление новых элементов в динамический массив
3. **Получение элементов** - получение элемента по индексу
4. **Установка элементов** - изменение значения элемента по индексу
5. **Сортировка** - сортировка элементов в динамическом массиве
6. **Конкатенация** - объединение двух динамических массивов
7. **Фильтрация (where)** - фильтрация элементов по заданному условию
8. **Отображение (map)** - преобразование элементов по заданной функции
9. **Вывод всех элементов** - отображение содержимого динамического массива
10. **Удаление динамического массива** - освобождение всей памяти, связанной с динамическим массивом

## Поддерживаемые типы данных

Программа поддерживает работу с тремя основными типами данных:

1. **double** - числа с плавающей запятой двойной точности
2. **string** - строки переменной длины
3. **Point** - трехмерные точки с координатами x, y, z

Каждый тип данных описывается структурой FieldInfo, которая содержит информацию о размере, методах сравнения, выделения и освобождения памяти, а также присваивания значений.

## Интерфейс пользователя

Программа предоставляет три режима интерфейса:
- **stringUI()** - интерфейс для работы со строками
- **doubleUI()** - интерфейс для работы с числами double
- **pointUI()** - интерфейс для работы с трехмерными точками

Каждый интерфейс предоставляет меню с возможностью выбора операций, таких как создание динамического массива, добавление элементов, сортировка и т.д.

## Тестирование

В проекте реализованы модульные тесты (в файле tests.c), которые проверяют корректность работы всех основных функций:
- Создание динамических массивов
- Добавление и получение элементов
- Установка значений
- Операции map и where
- Конкатенация динамических массивов
- Сортировка
- Граничные условия и обработка ошибок

## Сборка и запуск

Для сборки проекта используется CMake. Проект может быть собран с помощью следующих команд:
```
mkdir build
cd build
cmake ..
make
```

Затем можно запустить исполняемый файл `firstlab` или выполнить тесты с помощью `tests`.

## Особенности реализации

- Использована система полиморфизма через структуру FieldInfo
- Реализована автоматическая перераспределение памяти при увеличении размера динамического массива
- Все ресурсы корректно освобождаются для предотвращения утечек памяти
- Поддержка динамического расширения вместимости динамического массива при необходимости
- Безопасная обработка граничных условий и ошибок
- Новый тип данных Point с координатами x, y, z для представления трехмерных точек